<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Laundry Express</title>
<style>
  body{font-family:system-ui,-apple-system,Inter,sans-serif;background:#0b1220;color:#e6edf5;margin:0}
  header{padding:18px;text-align:center;border-bottom:1px solid #1f2937}
  h1{margin:0;font-size:20px}
  .wrap{max-width:600px;margin:0 auto;padding:16px}
  .chip{display:flex;align-items:center;justify-content:space-between;background:#111827;border:1px solid #1f2937;border-radius:12px;padding:10px;margin:6px 0}
  .name{font-weight:600}
  .desc{font-size:12px;color:#94a3b8}
  .count{min-width:30px;text-align:center}
  .btn{border:1px solid rgba(255,255,255,.2);background:rgba(56,189,248,.15);color:#e6edf5;padding:4px 10px;border-radius:8px;cursor:pointer}
  .btn.round{width:28px;height:28px;border-radius:50%;font-weight:bold}
  .result{margin-top:16px}
  .load{padding:10px;border:1px solid #1f2937;border-radius:10px;margin:6px 0;background:rgba(255,255,255,.05)}
  .mut{font-size:12px;color:#94a3b8}
  .warn{color:#fecaca;margin-top:8px}
</style>
</head>
<body>
<header><h1>üß∫ Laundry Express</h1></header>
<div class="wrap">
  <div id="chips"></div>
  <button id="optimize" class="btn" style="margin-top:10px">‚öôÔ∏è Optimiser</button>
  <button id="reset" class="btn" style="margin-top:10px">R√©initialiser</button>
  <div id="result" class="result"></div>
</div>

<script>
const CATS = [
  { key:"blancs",   name:"Blancs",   desc:"t-shirts/draps blancs",      cycle:"Coton 40 ¬∞C" },
  { key:"clairs",   name:"Clairs",   desc:"beige, gris clair, pastels", cycle:"Couleurs 30 ¬∞C" },
  { key:"couleurs", name:"Couleurs", desc:"bleu/vert moyens",           cycle:"Couleurs 30 ¬∞C" },
  { key:"vives",    name:"Vives",    desc:"rouges/oranges vifs",        cycle:"Couleurs 30 ¬∞C" },
  { key:"fonces",   name:"Fonc√©s",   desc:"marine, noir",               cycle:"Fonc√©es 30 ¬∞C" },
  { key:"denim",    name:"Denim",    desc:"jeans",                      cycle:"Jeans 30 ¬∞C" },
  { key:"delicats", name:"D√©licats", desc:"laine/soie/sport",           cycle:"D√©licat 20‚Äì30 ¬∞C" },
  { key:"chaud",    name:"Serviettes/Draps", desc:"linge de maison",    cycle:"Coton 60 ¬∞C" }
];
const state = Object.fromEntries(CATS.map(c=>[c.key,0]));
const $ = s=>document.querySelector(s);

function renderChips(){
  const box=$("#chips"); box.innerHTML="";
  CATS.forEach(c=>{
    const el=document.createElement("div"); el.className="chip";
    el.innerHTML=`<div><div class="name">${c.name}</div><div class="desc">${c.desc}</div></div>
      <button class="btn round" data-k="${c.key}" data-d="-1">‚àí</button>
      <div class="count" id="count-${c.key}">0</div>
      <button class="btn round" data-k="${c.key}" data-d="1">+</button>`;
    box.appendChild(el);
  });
  box.addEventListener("click",e=>{
    const b=e.target.closest("button[data-k]"); if(!b)return;
    const k=b.dataset.k, d=Number(b.dataset.d);
    state[k]=Math.max(0,state[k]+d);
    $("#count-"+k).textContent=state[k];
  });
}

function optimize(){
  const groups=CATS.filter(c=>state[c.key]>0).map(c=>({
    name:c.name, cycle:c.cycle, count:state[c.key]
  }));
  if(!groups.length){$("#result").innerHTML="<p class='mut'>Ajoute au moins 1 pi√®ce.</p>";return;}
  let html=`<h3>${groups.length} batt√©e(s)</h3>`;
  groups.forEach((g,i)=>{
    html+=`<div class="load"><b>Lot ${i+1} :</b> ${g.name}<br><span class="mut">${g.count} article(s) ¬∑ Cycle : ${g.cycle}</span></div>`;
  });
  if(state.blancs>0 && state.vives>0) html+=`<div class="warn">‚ö†Ô∏è Ne m√©lange pas Blancs et Vives.</div>`;
  $("#result").innerHTML=html;
}

renderChips();
$("#optimize").addEventListener("click",optimize);
$("#reset").addEventListener("click",()=>{for(const k in state)state[k]=0;renderChips();$("#result").innerHTML="";});
</script>
</body>
</html>
